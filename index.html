<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>å®æœæ°çš„Androidåº”ç”¨ä¸‹è½½ç«™</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Microsoft YaHei', Arial, sans-serif;
		}
		
		body {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: #333;
			min-height: 100vh;
			padding: 20px;
		}
		
		.container {
			max-width: 1200px;
			margin: 0 auto;
		}
		
		header {
			text-align: center;
			padding: 30px 20px;
			color: white;
			margin-bottom: 20px;
		}
		
		h1 {
			font-size: 2.5em;
			margin-bottom: 10px;
			text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
		}
		
		.subtitle {
			font-size: 1.2em;
			opacity: 0.9;
			margin-bottom: 5px;
		}
		
		.update-time {
			margin-top: 15px;
			font-size: 0.9em;
			opacity: 0.8;
		}
		
		.controls {
			background: white;
			padding: 15px;
			border-radius: 10px;
			margin-bottom: 20px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
			display: flex;
			justify-content: space-between;
			align-items: center;
			flex-wrap: wrap;
			gap: 10px;
		}
		
		.search-box {
			display: flex;
			flex: 1;
			min-width: 200px;
		}
		
		.search-box input {
			flex: 1;
			padding: 10px 15px;
			border: 2px solid #667eea;
			border-radius: 25px 0 0 25px;
			font-size: 1em;
		}
		
		.search-btn {
			background: #667eea;
			color: white;
			border: none;
			padding: 10px 20px;
			border-radius: 0 25px 25px 0;
			cursor: pointer;
		}
		
		.stats {
			display: flex;
			gap: 15px;
			font-size: 0.9em;
		}
		
		.stat-item {
			background: #f8f9fa;
			padding: 5px 10px;
			border-radius: 15px;
			color: #666;
		}
		
		.apps-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
			gap: 25px;
			margin-bottom: 40px;
		}
		
		.app-card {
			background: white;
			border-radius: 15px;
			overflow: hidden;
			box-shadow: 0 10px 30px rgba(0,0,0,0.1);
			transition: transform 0.3s, box-shadow 0.3s;
		}
		
		.app-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 15px 40px rgba(0,0,0,0.15);
		}
		
		.app-header {
			background: linear-gradient(135deg, #667eea, #764ba2);
			color: white;
			padding: 20px;
			position: relative;
		}
		
		.app-name {
			font-size: 1.5em;
			font-weight: bold;
			margin-bottom: 5px;
			word-break: break-word;
		}
		
		.app-filename {
			font-size: 0.85em;
			opacity: 0.9;
			margin-bottom: 10px;
		}
		
		.app-size {
			position: absolute;
			top: 15px;
			right: 15px;
			background: rgba(255,255,255,0.2);
			padding: 3px 10px;
			border-radius: 12px;
			font-size: 0.85em;
		}
		
		.app-content {
			padding: 20px;
		}
		
		.image-section {
			margin-bottom: 20px;
		}
		
		.section-title {
			display: flex;
			align-items: center;
			margin-bottom: 10px;
			color: #667eea;
			font-size: 1.1em;
		}
		
		.section-title i {
			margin-right: 8px;
		}
		
		.info-image, .desc-image {
			width: 100%;
			border-radius: 10px;
			margin-bottom: 10px;
			border: 1px solid #eee;
			cursor: pointer;
			transition: transform 0.3s;
		}
		
		.info-image:hover, .desc-image:hover {
			transform: scale(1.02);
		}
		
		.screenshots-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
			gap: 10px;
			margin-top: 10px;
		}
		
		.screenshot {
			width: 100%;
			height: 120px;
			object-fit: cover;
			border-radius: 8px;
			border: 1px solid #eee;
			cursor: pointer;
			transition: transform 0.3s;
		}
		
		.screenshot:hover {
			transform: scale(1.05);
		}
		
		.download-btn {
			display: block;
			width: 100%;
			background: linear-gradient(135deg, #4CAF50, #45a049);
			color: white;
			text-align: center;
			padding: 15px;
			border-radius: 10px;
			text-decoration: none;
			font-weight: bold;
			font-size: 1.1em;
			margin-top: 20px;
			transition: all 0.3s;
			border: none;
			cursor: pointer;
		}
		
		.download-btn:hover {
			background: linear-gradient(135deg, #45a049, #3d8b40);
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
		}
		
		.download-btn i {
			margin-right: 8px;
		}
		
		.image-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.9);
			z-index: 1000;
			align-items: center;
			justify-content: center;
			padding: 20px;
		}
		
		.modal-content {
			max-width: 90%;
			max-height: 90%;
		}
		
		.modal-image {
			max-width: 100%;
			max-height: 90vh;
			border-radius: 10px;
		}
		
		.close-modal {
			position: absolute;
			top: 20px;
			right: 30px;
			color: white;
			font-size: 40px;
			cursor: pointer;
			z-index: 1001;
		}
		
		.empty-state {
			text-align: center;
			padding: 60px 20px;
			background: white;
			border-radius: 15px;
			margin-bottom: 40px;
		}
		
		.empty-icon {
			font-size: 60px;
			margin-bottom: 20px;
			opacity: 0.5;
		}
		
		.empty-state h3 {
			color: #666;
			margin-bottom: 10px;
		}
		
		.empty-state p {
			color: #888;
			max-width: 500px;
			margin: 0 auto 20px;
		}
		
		.loading {
			text-align: center;
			padding: 40px;
			color: white;
			font-size: 1.2em;
		}
		
		.spinner {
			border: 5px solid rgba(255,255,255,0.3);
			border-top: 5px solid white;
			border-radius: 50%;
			width: 50px;
			height: 50px;
			animation: spin 1s linear infinite;
			margin: 0 auto 20px;
		}
		
		@keyframes spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}
		
		footer {
			text-align: center;
			padding: 30px 0;
			color: white;
			opacity: 0.8;
			font-size: 0.9em;
		}
		
		@media (max-width: 768px) {
			.apps-grid {
				grid-template-columns: 1fr;
			}
			
			.controls {
				flex-direction: column;
				align-items: stretch;
			}
			
			.search-box {
				width: 100%;
				margin-bottom: 10px;
			}
			
			.stats {
				justify-content: center;
				width: 100%;
			}
			
			h1 {
				font-size: 2em;
			}
			
			.screenshots-grid {
				grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
			}
			
			.screenshot {
				height: 100px;
			}
		}
		
		.error-message {
			background: #ffebee;
			color: #c62828;
			padding: 15px;
			border-radius: 10px;
			margin-bottom: 20px;
			border-left: 4px solid #c62828;
		}
		
		.error-message i {
			margin-right: 10px;
		}
		
		.file-info {
			background: #f8f9fa;
			padding: 15px;
			border-radius: 10px;
			margin-bottom: 15px;
			font-size: 0.9em;
		}
		
		.file-info-row {
			display: flex;
			justify-content: space-between;
			margin-bottom: 5px;
		}
		
		.file-info-label {
			color: #666;
		}
		
		.file-info-value {
			font-weight: 500;
		}
		
		.github-link {
			text-decoration: none;
			color: #667eea;
			display: inline-flex;
			align-items: center;
			gap: 5px;
			margin-top: 5px;
		}
		
		.github-link:hover {
			text-decoration: underline;
		}
	</style>
</head>
<body>
	<div class="container">
		<header>
			<h1>å®æœæ°çš„Androidåº”ç”¨ä¸‹è½½ç«™</h1>
			<p class="subtitle">è‡ªåŠ¨æ£€æµ‹GitHubä»“åº“ä¸­çš„APKæ–‡ä»¶ï¼Œæä¾›ä¸€é”®ä¸‹è½½</p>
			<p class="update-time">æœ€åæ›´æ–°: <span id="current-time">æ­£åœ¨æ£€æµ‹...</span></p>
		</header>
		
		<div class="controls">
			<div class="search-box">
				<input type="text" id="search-input" placeholder="æœç´¢åº”ç”¨åç§°æˆ–æè¿°...">
				<button class="search-btn" onclick="searchApps()">ğŸ” æœç´¢</button>
			</div>
			
			<div class="stats">
				<div class="stat-item" id="total-apps">åº”ç”¨æ•°é‡: 0</div>
				<div class="stat-item" id="total-size">æ€»å¤§å°: 0 MB</div>
				<div class="stat-item" id="last-update">æ›´æ–°ä¸­...</div>
			</div>
		</div>
		
		<div id="error-container" style="display: none;"></div>
		
		<div id="loading" class="loading">
			<div class="spinner"></div>
			<p>æ­£åœ¨æ£€æµ‹GitHubä»“åº“ä¸­çš„APKæ–‡ä»¶...</p>
			<p style="font-size: 0.9em; margin-top: 10px;">æ­£åœ¨è¿æ¥åˆ°: https://github.com/ningchaojie/ningchaojie.github.io</p>
		</div>
		
		<div id="apps-container" class="apps-grid" style="display: none;"></div>
		
		<div id="empty-state" class="empty-state" style="display: none;">
			<div class="empty-icon">ğŸ“±</div>
			<h3>æœªæ£€æµ‹åˆ°APKæ–‡ä»¶</h3>
			<p>ä½ çš„GitHubä»“åº“ä¸­è¿˜æ²¡æœ‰APKæ–‡ä»¶ã€‚è¯·ä¸Šä¼ APKæ–‡ä»¶åˆ°ä»“åº“æ ¹ç›®å½•ï¼Œæ–‡ä»¶åæ ¼å¼å¦‚ï¼šåº”ç”¨åç§°.apk</p>
			<p>å¦‚éœ€å±•ç¤ºåº”ç”¨ä¿¡æ¯ï¼Œå¯ä»¥ä¸Šä¼ é…å¥—å›¾ç‰‡ï¼šåº”ç”¨åç§°_æè¿°.jpgã€åº”ç”¨åç§°_åŸºæœ¬ä¿¡æ¯.jpgã€åº”ç”¨åç§°_ç•Œé¢_1.jpg ç­‰</p>
			<a href="https://github.com/ningchaojie/ningchaojie.github.io/upload" class="download-btn" style="margin-top: 20px; max-width: 300px; margin-left: auto; margin-right: auto;">
				ğŸ“¤ å‰å¾€GitHubä¸Šä¼ æ–‡ä»¶
			</a>
		</div>
		
		<div id="image-modal" class="image-modal">
			<span class="close-modal" onclick="closeImageModal()">&times;</span>
			<div class="modal-content">
				<img id="modal-image" class="modal-image" src="" alt="é¢„è§ˆå›¾ç‰‡">
			</div>
		</div>
		
		<footer>
			<p>Â© 2025 å®æœæ° - Androidåº”ç”¨ä¸‹è½½ç«™</p>
			<p>æœ¬é¡µé¢è‡ªåŠ¨æ£€æµ‹ <a href="https://github.com/ningchaojie/ningchaojie.github.io" style="color: white; text-decoration: underline;">GitHubä»“åº“</a> ä¸­çš„APKæ–‡ä»¶å¹¶æä¾›ä¸‹è½½</p>
			<p style="margin-top: 10px; font-size: 0.85em;">æ£€æµ‹è§„åˆ™ï¼šè‡ªåŠ¨æŸ¥æ‰¾æ‰€æœ‰.apkæ–‡ä»¶ï¼Œå¹¶åŒ¹é…å¯¹åº”çš„æè¿°å’Œæˆªå›¾å›¾ç‰‡</p>
			<p style="margin-top: 5px; font-size: 0.85em;">å½“å‰æ˜¾ç¤º: <span id="file-count">0</span> ä¸ªAPKæ–‡ä»¶ | é¡µé¢ç‰ˆæœ¬: 2024.12.24.v2</p>
		</footer>
	</div>
	
	<script>
		// å…¨å±€å˜é‡
		let allApps = [];
		let filteredApps = [];
		
		// ä¿®å¤æ—¶é—´æ ¼å¼åŒ–å‡½æ•°
		function formatFileSize(bytes) {
			if (bytes === 0 || bytes === undefined) return 'æœªçŸ¥å¤§å°';
			const units = ['B', 'KB', 'MB', 'GB'];
			let size = bytes;
			let unitIndex = 0;
			
			while (size >= 1024 && unitIndex < units.length - 1) {
				size /= 1024;
				unitIndex++;
			}
			
			return size.toFixed(2) + ' ' + units[unitIndex];
		}
		
		// ä¿®å¤æ—¶é—´æ ¼å¼åŒ–å‡½æ•°
		function formatTime(dateString) {
			if (!dateString) return 'æœªçŸ¥æ—¶é—´';
			
			try {
				const date = new Date(dateString);
				if (isNaN(date.getTime())) {
					return 'æœªçŸ¥æ—¶é—´';
				}
				return date.toLocaleDateString('zh-CN') + ' ' + date.toLocaleTimeString('zh-CN', { 
					hour: '2-digit', 
					minute: '2-digit' 
				});
			} catch (e) {
				return 'æœªçŸ¥æ—¶é—´';
			}
		}
		
		// ä»æ–‡ä»¶åæå–åº”ç”¨åç§°
		function extractAppName(filename) {
			// å»æ‰.apkæ‰©å±•å
			let name = filename.replace('.apk', '');
			
			// å°è¯•å»æ‰ç‰ˆæœ¬å·ï¼ˆå¦‚æœæœ‰ï¼‰
			name = name.replace(/[vV]?\d+(\.\d+)*$/, '').replace(/[_\-\s]+$/, '');
			
			return name || filename.replace('.apk', '');
		}
		
		// è·å–æ–‡ä»¶åå‰ç¼€ï¼ˆç”¨äºåŒ¹é…å›¾ç‰‡ï¼‰
		function getFilePrefix(filename) {
			// å¯¹äºä¸­æ–‡æ–‡ä»¶åï¼Œç›´æ¥è¿”å›å»æ‰.apkçš„éƒ¨åˆ†
			return filename.replace('.apk', '');
		}
		
		// æ˜¾ç¤ºå›¾ç‰‡æ¨¡æ€æ¡†
		function showImageModal(imageUrl) {
			const modal = document.getElementById('image-modal');
			const modalImage = document.getElementById('modal-image');
			
			modalImage.src = imageUrl;
			modal.style.display = 'flex';
			
			modal.onclick = function(event) {
				if (event.target === modal) {
					closeImageModal();
				}
			};
		}
		
		// å…³é—­å›¾ç‰‡æ¨¡æ€æ¡†
		function closeImageModal() {
			document.getElementById('image-modal').style.display = 'none';
		}
		
		// æœç´¢åº”ç”¨
		function searchApps() {
			const searchInput = document.getElementById('search-input').value.toLowerCase();
			
			if (!searchInput.trim()) {
				filteredApps = [...allApps];
				displayApps();
				return;
			}
			
			filteredApps = allApps.filter(app => {
				const appName = app.name.toLowerCase();
				const fileName = app.filename.toLowerCase();
				
				return appName.includes(searchInput) || fileName.includes(searchInput);
			});
			
			displayApps();
		}
		
		// æ˜¾ç¤ºåº”ç”¨åˆ—è¡¨
		function displayApps() {
			const container = document.getElementById('apps-container');
			const emptyState = document.getElementById('empty-state');
			const loading = document.getElementById('loading');
			
			loading.style.display = 'none';
			
			if (filteredApps.length === 0) {
				container.style.display = 'none';
				emptyState.style.display = 'block';
				return;
			}
			
			emptyState.style.display = 'none';
			container.style.display = 'grid';
			
			container.innerHTML = '';
			
			document.getElementById('total-apps').textContent = `åº”ç”¨æ•°é‡: ${filteredApps.length}`;
			document.getElementById('file-count').textContent = filteredApps.length;
			
			const totalSize = filteredApps.reduce((sum, app) => {
				return sum + (app.size || 0);
			}, 0);
			
			document.getElementById('total-size').textContent = `æ€»å¤§å°: ${formatFileSize(totalSize)}`;
			
			// æŒ‰æ–‡ä»¶åæ’åºï¼Œä¸­æ–‡ä¼˜å…ˆ
			filteredApps.sort((a, b) => {
				// ä¸­æ–‡æ–‡ä»¶åæ’åœ¨å‰é¢
				const isChineseA = /[\u4e00-\u9fff]/.test(a.filename);
				const isChineseB = /[\u4e00-\u9fff]/.test(b.filename);
				
				if (isChineseA && !isChineseB) return -1;
				if (!isChineseA && isChineseB) return 1;
				
				// éƒ½ä¸­æ–‡æˆ–éƒ½è‹±æ–‡ï¼ŒæŒ‰å­—æ¯é¡ºåº
				return a.filename.localeCompare(b.filename, 'zh-CN');
			});
			
			filteredApps.forEach(app => {
				const appCard = document.createElement('div');
				appCard.className = 'app-card';
				
				let infoImageHtml = '';
				let descImageHtml = '';
				let screenshotsHtml = '';
				
				// åŸºæœ¬ä¿¡æ¯å›¾ç‰‡
				if (app.infoImage) {
					infoImageHtml = `
						<div class="image-section">
							<div class="section-title">
								<i>ğŸ“‹</i> åŸºæœ¬ä¿¡æ¯
							</div>
							<img src="${app.infoImage.download_url}" 
								 alt="${app.name}åŸºæœ¬ä¿¡æ¯" 
								 class="info-image"
								 onclick="showImageModal('${app.infoImage.download_url}')">
						</div>
					`;
				}
				
				// æè¿°å›¾ç‰‡
				if (app.descImage) {
					descImageHtml = `
						<div class="image-section">
							<div class="section-title">
								<i>ğŸ“</i> åº”ç”¨æè¿°
							</div>
							<img src="${app.descImage.download_url}" 
								 alt="${app.name}æè¿°" 
								 class="desc-image"
								 onclick="showImageModal('${app.descImage.download_url}')">
						</div>
					`;
				}
				
				// ç•Œé¢æˆªå›¾
				if (app.screenshots && app.screenshots.length > 0) {
					const screenshotsGrid = app.screenshots.map((screenshot, index) => `
						<img src="${screenshot.download_url}" 
							 alt="${app.name}æˆªå›¾${index + 1}" 
							 class="screenshot"
							 onclick="showImageModal('${screenshot.download_url}')">
					`).join('');
					
					screenshotsHtml = `
						<div class="image-section">
							<div class="section-title">
								<i>ğŸ–¼ï¸</i> ç•Œé¢æˆªå›¾ (${app.screenshots.length}å¼ )
							</div>
							<div class="screenshots-grid">
								${screenshotsGrid}
							</div>
						</div>
					`;
				}
				
				// æ–‡ä»¶ä¿¡æ¯
				const fileInfoHtml = `
					<div class="file-info">
						<div class="file-info-row">
							<span class="file-info-label">æ–‡ä»¶å:</span>
							<span class="file-info-value">${app.filename}</span>
						</div>
						<div class="file-info-row">
							<span class="file-info-label">æ–‡ä»¶å¤§å°:</span>
							<span class="file-info-value">${formatFileSize(app.size)}</span>
						</div>
						<div class="file-info-row">
							<span class="file-info-label">ä¸Šä¼ æ—¶é—´:</span>
							<span class="file-info-value">${formatTime(app.updated)}</span>
						</div>
						<div class="file-info-row">
							<span class="file-info-label">GitHubé“¾æ¥:</span>
							<a href="${app.html_url}" target="_blank" class="github-link">
								ğŸ”— æŸ¥çœ‹æ–‡ä»¶
							</a>
						</div>
					</div>
				`;
				
				appCard.innerHTML = `
					<div class="app-header">
						<div class="app-name">${app.name}</div>
						<div class="app-filename">${app.filename}</div>
						<div class="app-size">${formatFileSize(app.size)}</div>
					</div>
					
					<div class="app-content">
						${fileInfoHtml}
						
						${infoImageHtml}
						${descImageHtml}
						${screenshotsHtml}
						
						<a href="${app.download_url}" 
						   class="download-btn" 
						   onclick="trackDownload('${app.filename}')"
						   download="${app.filename}">
							<i>â¬‡ï¸</i> ä¸‹è½½ ${app.name}
						</a>
					</div>
				`;
				
				container.appendChild(appCard);
			});
		}
		
		// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
		function showError(message) {
			const errorContainer = document.getElementById('error-container');
			errorContainer.style.display = 'block';
			errorContainer.innerHTML = `
				<div class="error-message">
					<i>âš ï¸</i> <strong>é”™è¯¯:</strong> ${message}
				</div>
			`;
			
			document.getElementById('loading').style.display = 'none';
		}
		
		// ä¸‹è½½è·Ÿè¸ª
		function trackDownload(filename) {
			console.log(`å¼€å§‹ä¸‹è½½: ${filename}`);
			
			// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä¸‹è½½ç»Ÿè®¡
			try {
				const downloads = JSON.parse(localStorage.getItem('download_stats') || '{}');
				downloads[filename] = (downloads[filename] || 0) + 1;
				localStorage.setItem('download_stats', JSON.stringify(downloads));
			} catch (e) {
				console.log('ä¸‹è½½ç»Ÿè®¡ä¿å­˜å¤±è´¥:', e);
			}
		}
		
		// ä¸»å‡½æ•°ï¼šä»GitHubä»“åº“è·å–æ–‡ä»¶
		async function loadAppsFromGitHub() {
			try {
				document.getElementById('current-time').textContent = new Date().toLocaleString('zh-CN');
				
				const username = 'ningchaojie';
				const repo = 'ningchaojie.github.io';
				
				// ä½¿ç”¨ä»£ç†æˆ–ç›´æ¥è®¿é—®GitHub API
				const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/`;
				
				console.log('æ­£åœ¨è¯·æ±‚GitHub API:', apiUrl);
				
				const response = await fetch(apiUrl);
				
				if (!response.ok) {
					throw new Error(`GitHub APIè¿”å›é”™è¯¯: ${response.status} ${response.statusText}`);
				}
				
				const files = await response.json();
				
				if (!Array.isArray(files)) {
					throw new Error('GitHub APIè¿”å›çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®');
				}
				
				console.log(`è·å–åˆ°${files.length}ä¸ªæ–‡ä»¶`);
				
				const apkFiles = files.filter(file => 
					file.type === 'file' && 
					file.name.toLowerCase().endsWith('.apk')
				);
				
				console.log(`æ‰¾åˆ°${apkFiles.length}ä¸ªAPKæ–‡ä»¶`);
				
				if (apkFiles.length === 0) {
					showError('æœªåœ¨ä»“åº“ä¸­æ‰¾åˆ°APKæ–‡ä»¶ã€‚è¯·ä¸Šä¼ .apkæ–‡ä»¶åˆ°ä»“åº“æ ¹ç›®å½•ã€‚');
					document.getElementById('empty-state').style.display = 'block';
					document.getElementById('loading').style.display = 'none';
					return;
				}
				
				const apps = [];
				let latestUpdate = null;
				
				for (const apkFile of apkFiles) {
					const appName = extractAppName(apkFile.name);
					const prefix = getFilePrefix(apkFile.name);
					
					console.log(`å¤„ç†APK: ${apkFile.name}, å‰ç¼€: ${prefix}`);
					
					// æŸ¥æ‰¾åŸºæœ¬ä¿¡æ¯å›¾ç‰‡
					const infoImage = files.find(file => 
						file.type === 'file' && 
						file.name === `${prefix}_åŸºæœ¬ä¿¡æ¯.jpg`
					);
					
					// æŸ¥æ‰¾æè¿°å›¾ç‰‡
					const descImage = files.find(file => 
						file.type === 'file' && 
						file.name === `${prefix}_æè¿°.jpg`
					);
					
					// æŸ¥æ‰¾æ‰€æœ‰ç•Œé¢æˆªå›¾
					const screenshots = files.filter(file => {
						if (file.type !== 'file' || !file.name.toLowerCase().endsWith('.jpg')) {
							return false;
						}
						
						const pattern = new RegExp(`^${prefix}_ç•Œé¢_\\d+\\.jpg$`, 'i');
						return pattern.test(file.name);
					}).sort((a, b) => {
						const numA = parseInt(a.name.match(/_ç•Œé¢_(\d+)/i)?.[1] || 0);
						const numB = parseInt(b.name.match(/_ç•Œé¢_(\d+)/i)?.[1] || 0);
						return numA - numB;
					});
					
					// æ›´æ–°æ—¶é—´å¤„ç†
					let updatedTime = apkFile.updated_at || apkFile.created_at;
					if (updatedTime) {
						const updateDate = new Date(updatedTime);
						if (!latestUpdate || updateDate > latestUpdate) {
							latestUpdate = updateDate;
						}
					}
					
					apps.push({
						name: appName,
						filename: apkFile.name,
						size: apkFile.size,
						download_url: apkFile.download_url,
						html_url: apkFile.html_url,
						updated: updatedTime,
						infoImage: infoImage,
						descImage: descImage,
						screenshots: screenshots
					});
					
					console.log(`  - æ‰¾åˆ° ${screenshots.length} å¼ æˆªå›¾`);
				}
				
				allApps = apps;
				filteredApps = [...apps];
				
				// æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
				if (latestUpdate) {
					document.getElementById('last-update').textContent = `æœ€åæ›´æ–°: ${formatTime(latestUpdate.toISOString())}`;
				} else {
					document.getElementById('last-update').textContent = `æœ€åæ›´æ–°: ${new Date().toLocaleDateString('zh-CN')}`;
				}
				
				displayApps();
				
			} catch (error) {
				console.error('åŠ è½½åº”ç”¨æ—¶å‡ºé”™:', error);
				showError(`æ— æ³•åŠ è½½åº”ç”¨åˆ—è¡¨: ${error.message}`);
			}
		}
		
		// é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
		window.addEventListener('DOMContentLoaded', () => {
			document.getElementById('current-time').textContent = new Date().toLocaleString('zh-CN');
			
			loadAppsFromGitHub();
			
			document.getElementById('search-input').addEventListener('keyup', (event) => {
				if (event.key === 'Enter') {
					searchApps();
				}
			});
			
			document.addEventListener('keydown', (event) => {
				if (event.key === 'Escape') {
					closeImageModal();
				}
			});
			
			// æ·»åŠ è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ï¼ˆæ¯å°æ—¶åˆ·æ–°ä¸€æ¬¡ï¼‰
			setInterval(() => {
				loadAppsFromGitHub();
			}, 3600000); // 1å°æ—¶
		});
	</script>
</body>
</html>