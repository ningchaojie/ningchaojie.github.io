<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>å®æœæ° - åº”ç”¨ä¸æ–‡æ¡£ä¸‹è½½ç«™</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		:root {
			--primary: #667eea;
			--primary-dark: #5a67d8;
			--secondary: #764ba2;
			--success: #4CAF50;
			--success-dark: #45a049;
			--light: #f8f9fa;
			--dark: #343a40;
			--gray: #6c757d;
			--light-gray: #e9ecef;
			--border-radius: 12px;
			--shadow: 0 8px 30px rgba(0,0,0,0.08);
			--transition: all 0.3s ease;
		}
		
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		
		body {
			font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
			background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
			color: var(--dark);
			line-height: 1.6;
			min-height: 100vh;
			padding: 20px;
		}
		
		.container {
			max-width: 1400px;
			margin: 0 auto;
		}
		
		/* å¤´éƒ¨æ ·å¼ */
		header {
			text-align: center;
			padding: 30px 20px;
			background: linear-gradient(135deg, var(--primary), var(--secondary));
			color: white;
			border-radius: var(--border-radius);
			margin-bottom: 30px;
			box-shadow: var(--shadow);
		}
		
		.logo {
			font-size: 2.8rem;
			margin-bottom: 15px;
			display: inline-block;
			background: rgba(255,255,255,0.1);
			width: 80px;
			height: 80px;
			line-height: 80px;
			border-radius: 50%;
		}
		
		h1 {
			font-size: 2.2rem;
			margin-bottom: 10px;
			font-weight: 700;
		}
		
		.subtitle {
			font-size: 1.1rem;
			opacity: 0.9;
			max-width: 600px;
			margin: 0 auto 20px;
		}
		
		/* æ§åˆ¶æ æ ·å¼ */
		.controls {
			display: flex;
			flex-wrap: wrap;
			gap: 15px;
			background: white;
			padding: 20px;
			border-radius: var(--border-radius);
			margin-bottom: 25px;
			box-shadow: var(--shadow);
			align-items: center;
		}
		
		.search-box {
			flex: 1;
			min-width: 250px;
			position: relative;
		}
		
		.search-box input {
			width: 100%;
			padding: 12px 20px 12px 45px;
			border: 2px solid var(--light-gray);
			border-radius: 30px;
			font-size: 1rem;
			transition: var(--transition);
		}
		
		.search-box input:focus {
			outline: none;
			border-color: var(--primary);
			box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
		}
		
		.search-icon {
			position: absolute;
			left: 15px;
			top: 50%;
			transform: translateY(-50%);
			color: var(--gray);
			font-size: 1.2rem;
		}
		
		.filter-buttons {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
		}
		
		.filter-btn {
			padding: 10px 18px;
			border: 2px solid var(--light-gray);
			background: white;
			border-radius: 30px;
			cursor: pointer;
			font-weight: 500;
			transition: var(--transition);
		}
		
		.filter-btn:hover {
			border-color: var(--primary);
			color: var(--primary);
		}
		
		.filter-btn.active {
			background: var(--primary);
			color: white;
			border-color: var(--primary);
		}
		
		.stats {
			display: flex;
			gap: 15px;
			margin-left: auto;
			flex-wrap: wrap;
		}
		
		.stat-item {
			background: var(--light);
			padding: 8px 15px;
			border-radius: 20px;
			font-size: 0.9rem;
			color: var(--dark);
			display: flex;
			align-items: center;
			gap: 5px;
		}
		
		/* åŠ è½½åŠ¨ç”» */
		.loading {
			text-align: center;
			padding: 60px 20px;
		}
		
		.spinner {
			width: 60px;
			height: 60px;
			border: 5px solid rgba(102, 126, 234, 0.2);
			border-top-color: var(--primary);
			border-radius: 50%;
			animation: spin 1s linear infinite;
			margin: 0 auto 20px;
		}
		
		@keyframes spin {
			to { transform: rotate(360deg); }
		}
		
		/* æ–‡ä»¶å¡ç‰‡ç½‘æ ¼ */
		.files-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
			gap: 25px;
			margin-bottom: 40px;
		}
		
		@media (max-width: 768px) {
			.files-grid {
				grid-template-columns: 1fr;
			}
		}
		
		/* æ–‡ä»¶å¡ç‰‡æ ·å¼ */
		.file-card {
			background: white;
			border-radius: var(--border-radius);
			overflow: hidden;
			box-shadow: var(--shadow);
			transition: var(--transition);
			height: 100%;
			display: flex;
			flex-direction: column;
		}
		
		.file-card:hover {
			transform: translateY(-8px);
			box-shadow: 0 15px 40px rgba(0,0,0,0.12);
		}
		
		.card-header {
			background: linear-gradient(135deg, var(--primary), var(--secondary));
			color: white;
			padding: 20px;
			position: relative;
		}
		
		.file-type {
			position: absolute;
			top: 15px;
			right: 15px;
			background: rgba(255,255,255,0.2);
			padding: 5px 12px;
			border-radius: 20px;
			font-size: 0.85rem;
			font-weight: 500;
		}
		
		.file-name {
			font-size: 1.4rem;
			font-weight: 700;
			margin-bottom: 8px;
			word-break: break-word;
		}
		
		.file-filename {
			font-size: 0.9rem;
			opacity: 0.9;
		}
		
		.card-body {
			padding: 20px;
			flex-grow: 1;
			display: flex;
			flex-direction: column;
		}
		
		.file-meta {
			background: var(--light);
			padding: 15px;
			border-radius: 10px;
			margin-bottom: 20px;
		}
		
		.meta-row {
			display: flex;
			justify-content: space-between;
			margin-bottom: 8px;
			font-size: 0.95rem;
		}
		
		.meta-label {
			color: var(--gray);
			font-weight: 500;
		}
		
		.meta-value {
			font-weight: 600;
		}
		
		/* å›¾ç‰‡å±•ç¤ºåŒº */
		.images-section {
			margin-top: 15px;
		}
		
		.section-title {
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 12px;
			color: var(--primary);
			display: flex;
			align-items: center;
			gap: 8px;
		}
		
		/* æ¨ªå‘æ»šåŠ¨å®¹å™¨ */
		.scroll-container {
			position: relative;
			margin-bottom: 20px;
		}
		
		.scroll-wrapper {
			display: flex;
			overflow-x: auto;
			scroll-behavior: smooth;
			padding: 10px 5px;
			gap: 10px;
			scrollbar-width: none; /* Firefox */
			-ms-overflow-style: none; /* IE/Edge */
		}
		
		.scroll-wrapper::-webkit-scrollbar {
			display: none; /* Chrome/Safari */
		}
		
		.scroll-content {
			display: flex;
			gap: 10px;
		}
		
		.scroll-image {
			flex: 0 0 auto;
			width: 180px;
			height: 135px;
			object-fit: cover;
			border-radius: 8px;
			cursor: pointer;
			transition: var(--transition);
			border: 2px solid transparent;
		}
		
		.scroll-image:hover {
			transform: scale(1.03);
			border-color: var(--primary);
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
		}
		
		.scroll-btn {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			background: rgba(255,255,255,0.9);
			border: none;
			width: 36px;
			height: 36px;
			border-radius: 50%;
			cursor: pointer;
			font-size: 1.2rem;
			color: var(--primary);
			box-shadow: 0 3px 10px rgba(0,0,0,0.1);
			z-index: 10;
			transition: var(--transition);
		}
		
		.scroll-btn:hover {
			background: white;
			box-shadow: 0 5px 15px rgba(0,0,0,0.15);
			transform: translateY(-50%) scale(1.1);
		}
		
		.scroll-left {
			left: 10px;
		}
		
		.scroll-right {
			right: 10px;
		}
		
		.scroll-btn.hidden {
			display: none;
		}
		
		/* ä¸‹è½½æŒ‰é’® */
		.download-btn {
			display: block;
			width: 100%;
			background: linear-gradient(135deg, var(--success), var(--success-dark));
			color: white;
			text-align: center;
			padding: 15px;
			border-radius: 10px;
			text-decoration: none;
			font-weight: 700;
			font-size: 1.1rem;
			margin-top: 20px;
			transition: var(--transition);
			border: none;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
		}
		
		.download-btn:hover {
			background: linear-gradient(135deg, var(--success-dark), #3d8b40);
			transform: translateY(-2px);
			box-shadow: 0 7px 20px rgba(76, 175, 80, 0.3);
		}
		
		.download-count {
			margin-left: auto;
			background: rgba(255,255,255,0.2);
			padding: 3px 10px;
			border-radius: 15px;
			font-size: 0.9rem;
		}
		
		/* ç©ºçŠ¶æ€ */
		.empty-state {
			text-align: center;
			padding: 80px 20px;
			background: white;
			border-radius: var(--border-radius);
			margin-bottom: 40px;
			box-shadow: var(--shadow);
		}
		
		.empty-icon {
			font-size: 4rem;
			color: var(--light-gray);
			margin-bottom: 20px;
		}
		
		.empty-state h3 {
			color: var(--dark);
			margin-bottom: 15px;
			font-size: 1.5rem;
		}
		
		.empty-state p {
			color: var(--gray);
			max-width: 500px;
			margin: 0 auto 25px;
			line-height: 1.7;
		}
		
		/* é¡µè„š */
		footer {
			text-align: center;
			padding: 30px 0;
			color: var(--dark);
			opacity: 0.8;
			font-size: 0.95rem;
		}
		
		footer a {
			color: var(--primary);
			text-decoration: none;
		}
		
		footer a:hover {
			text-decoration: underline;
		}
		
		/* é”™è¯¯æç¤º */
		.error-message {
			background: #ffebee;
			color: #c62828;
			padding: 20px;
			border-radius: var(--border-radius);
			margin-bottom: 25px;
			border-left: 5px solid #c62828;
			display: none;
		}
		
		.error-icon {
			margin-right: 10px;
			font-size: 1.2rem;
		}
		
		/* æ‡’åŠ è½½å›¾ç‰‡æ ·å¼ */
		.lazy-image {
			background: var(--light-gray);
			border-radius: 8px;
			display: flex;
			align-items: center;
			justify-content: center;
			color: var(--gray);
			font-size: 0.9rem;
		}
		
		/* æ›´æ–°ä¿¡æ¯ */
		.update-info {
			text-align: center;
			color: var(--gray);
			font-size: 0.9rem;
			margin-top: 15px;
		}
		
		/* æ–‡ä»¶å›¾æ ‡ */
		.file-icon {
			margin-right: 8px;
			font-size: 1.1rem;
		}
		
		/* æ–‡æ¡£å¡ç‰‡ç‰¹æ®Šæ ·å¼ */
		.document-card .card-header {
			background: linear-gradient(135deg, #3498db, #2980b9);
		}
		
		.document-card .file-type {
			background: rgba(255,255,255,0.25);
		}
		
		/* å·¥å…·æç¤º */
		.tooltip {
			position: relative;
			display: inline-block;
		}
		
		.tooltip .tooltiptext {
			visibility: hidden;
			width: 200px;
			background-color: var(--dark);
			color: white;
			text-align: center;
			border-radius: 6px;
			padding: 8px;
			position: absolute;
			z-index: 1;
			bottom: 125%;
			left: 50%;
			transform: translateX(-50%);
			opacity: 0;
			transition: opacity 0.3s;
			font-size: 0.85rem;
			font-weight: normal;
		}
		
		.tooltip .tooltiptext::after {
			content: "";
			position: absolute;
			top: 100%;
			left: 50%;
			margin-left: -5px;
			border-width: 5px;
			border-style: solid;
			border-color: var(--dark) transparent transparent transparent;
		}
		
		.tooltip:hover .tooltiptext {
			visibility: visible;
			opacity: 1;
		}
		
		/* ====== å›¾ç‰‡æµè§ˆå™¨æ¨¡æ€æ¡†æ ·å¼ ====== */
		.image-browser-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.95);
			z-index: 2000;
			flex-direction: column;
			backdrop-filter: blur(5px);
		}
		
		.modal-header {
			padding: 15px 20px;
			background: rgba(0, 0, 0, 0.8);
			color: white;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}
		
		.modal-title {
			font-size: 1.2rem;
			font-weight: 600;
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.modal-body {
			flex: 1;
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
			padding: 20px;
			overflow: hidden;
		}
		
		.image-container {
			max-width: 95%;
			max-height: 85%;
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
		}
		
		.browser-image {
			max-width: 100%;
			max-height: 100%;
			object-fit: contain;
			border-radius: 4px;
			box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
			opacity: 0;
			transition: opacity 0.3s ease;
		}
		
		.browser-image.loaded {
			opacity: 1;
		}
		
		.nav-btn {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			background: rgba(255, 255, 255, 0.15);
			color: white;
			border: none;
			width: 56px;
			height: 56px;
			border-radius: 50%;
			font-size: 28px;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s;
			z-index: 10;
			backdrop-filter: blur(10px);
			border: 1px solid rgba(255, 255, 255, 0.2);
		}
		
		.nav-btn:hover {
			background: rgba(255, 255, 255, 0.25);
			transform: translateY(-50%) scale(1.1);
			border-color: rgba(255, 255, 255, 0.3);
		}
		
		.nav-btn:active {
			transform: translateY(-50%) scale(0.95);
		}
		
		.prev-btn {
			left: 20px;
		}
		
		.next-btn {
			right: 20px;
		}
		
		.nav-btn.hidden {
			display: none;
		}
		
		.modal-footer {
			padding: 15px 20px;
			background: rgba(0, 0, 0, 0.8);
			color: white;
			border-top: 1px solid rgba(255, 255, 255, 0.1);
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		
		.image-counter {
			font-size: 1rem;
			font-weight: 600;
			background: rgba(255, 255, 255, 0.1);
			padding: 5px 15px;
			border-radius: 20px;
		}
		
		.image-info {
			flex: 1;
			text-align: center;
			font-size: 0.95rem;
			padding: 0 20px;
			opacity: 0.9;
		}
		
		.image-actions {
			display: flex;
			gap: 10px;
		}
		
		.action-btn {
			background: rgba(102, 126, 234, 0.8);
			color: white;
			border: none;
			padding: 8px 16px;
			border-radius: 6px;
			cursor: pointer;
			font-size: 0.95rem;
			transition: all 0.3s;
			display: flex;
			align-items: center;
			gap: 8px;
		}
		
		.action-btn:hover {
			background: rgba(102, 126, 234, 1);
			transform: translateY(-2px);
		}
		
		.close-modal {
			background: none;
			border: none;
			color: white;
			font-size: 32px;
			cursor: pointer;
			padding: 0;
			width: 40px;
			height: 40px;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: color 0.3s;
		}
		
		.close-modal:hover {
			color: #ff6b6b;
		}
		
		/* åŠ è½½æŒ‡ç¤ºå™¨ */
		.loader {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 50px;
			height: 50px;
			border: 3px solid rgba(255, 255, 255, 0.3);
			border-top-color: white;
			border-radius: 50%;
			animation: spin 1s linear infinite;
		}
		
		/* å“åº”å¼è°ƒæ•´ */
		@media (max-width: 768px) {
			.nav-btn {
				width: 46px;
				height: 46px;
				font-size: 24px;
			}
			
			.prev-btn {
				left: 10px;
			}
			
			.next-btn {
				right: 10px;
			}
			
			.modal-footer {
				flex-direction: column;
				gap: 15px;
				text-align: center;
			}
			
			.image-info {
				order: -1;
				width: 100%;
				padding: 0;
			}
			
			.image-actions {
				width: 100%;
				justify-content: center;
			}
			
			.modal-title {
				font-size: 1rem;
			}
		}
		
		/* è§¦æ‘¸æç¤º */
		.touch-hint {
			position: absolute;
			bottom: 30px;
			left: 50%;
			transform: translateX(-50%);
			background: rgba(0, 0, 0, 0.6);
			color: white;
			padding: 8px 15px;
			border-radius: 20px;
			font-size: 0.85rem;
			opacity: 0;
			transition: opacity 0.3s;
			pointer-events: none;
		}
		
		.touch-hint.show {
			opacity: 1;
		}
	</style>
</head>
<body>
	<div class="container">
		<!-- å¤´éƒ¨ -->
		<header>
			<div class="logo">ğŸ“±</div>
			<h1>å®æœæ°çš„ä¸‹è½½ç«™</h1>
			<p class="subtitle">è‡ªåŠ¨æ£€æµ‹GitHubä»“åº“ä¸­çš„APKåº”ç”¨ä¸æ–‡æ¡£ï¼Œæä¾›ä¸€é”®ä¸‹è½½ä¸å›¾ç‰‡é¢„è§ˆ</p>
			<div class="update-info">
				<span id="current-time">æ­£åœ¨è¿æ¥...</span> | 
				<span id="github-status">GitHub APIæ­£å¸¸</span>
			</div>
		</header>
		
		<!-- æ§åˆ¶æ  -->
		<div class="controls">
			<div class="search-box">
				<i class="fas fa-search search-icon"></i>
				<input type="text" id="search-input" placeholder="æœç´¢æ–‡ä»¶åç§°æˆ–æè¿°...">
			</div>
			
			<div class="filter-buttons">
				<button class="filter-btn active" data-filter="all">å…¨éƒ¨æ–‡ä»¶</button>
				<button class="filter-btn" data-filter="apk">APKåº”ç”¨</button>
				<button class="filter-btn" data-filter="document">æ–‡æ¡£</button>
			</div>
			
			<div class="stats">
				<div class="stat-item">
					<i class="fas fa-file-alt"></i>
					<span id="total-files">0ä¸ªæ–‡ä»¶</span>
				</div>
				<div class="stat-item">
					<i class="fas fa-download"></i>
					<span id="total-downloads">0æ¬¡ä¸‹è½½</span>
				</div>
				<div class="stat-item">
					<i class="fas fa-sync-alt"></i>
					<span id="last-update">æ›´æ–°ä¸­...</span>
				</div>
			</div>
		</div>
		
		<!-- é”™è¯¯æç¤º -->
		<div id="error-container" class="error-message">
			<i class="fas fa-exclamation-triangle error-icon"></i>
			<span id="error-text">å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•</span>
		</div>
		
		<!-- åŠ è½½åŠ¨ç”» -->
		<div id="loading" class="loading">
			<div class="spinner"></div>
			<p>æ­£åœ¨ä»GitHubä»“åº“åŠ è½½æ–‡ä»¶åˆ—è¡¨...</p>
			<p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
				ä»“åº“: <strong>ningchaojie/ningchaojie.github.io</strong>
			</p>
		</div>
		
		<!-- æ–‡ä»¶å±•ç¤ºåŒº -->
		<div id="files-container" class="files-grid" style="display: none;"></div>
		
		<!-- ç©ºçŠ¶æ€ -->
		<div id="empty-state" class="empty-state" style="display: none;">
			<div class="empty-icon">ğŸ“</div>
			<h3>æœªæ‰¾åˆ°ä»»ä½•æ–‡ä»¶</h3>
			<p>ä½ çš„GitHubä»“åº“ä¸­è¿˜æ²¡æœ‰APKæˆ–æ–‡æ¡£æ–‡ä»¶ï¼Œæˆ–è€…å½“å‰ç­›é€‰æ¡ä»¶æ²¡æœ‰åŒ¹é…çš„æ–‡ä»¶ã€‚</p>
			<p>è¯·ä¸Šä¼ æ–‡ä»¶åˆ°ä»“åº“æ ¹ç›®å½•ï¼Œæ–‡ä»¶åæ ¼å¼å‚è€ƒï¼š</p>
			<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; max-width: 400px; margin: 20px auto; text-align: left;">
				<div><strong>APKæ–‡ä»¶:</strong> åº”ç”¨å.apk</div>
				<div><strong>æè¿°å›¾ç‰‡:</strong> åº”ç”¨å_æè¿°_1.jpg</div>
				<div><strong>ç•Œé¢æˆªå›¾:</strong> åº”ç”¨å_ç•Œé¢_1.jpg</div>
				<div><strong>æ–‡æ¡£æ–‡ä»¶:</strong> æ–‡æ¡£å.pdf</div>
				<div><strong>å¼•è¨€å›¾ç‰‡:</strong> æ–‡æ¡£å_å¼•è¨€_1.jpg</div>
				<div><strong>ç›®å½•å›¾ç‰‡:</strong> æ–‡æ¡£å_ç›®å½•_1.jpg</div>
			</div>
			<a href="https://github.com/ningchaojie/ningchaojie.github.io/upload" 
			   class="download-btn" style="max-width: 300px; margin: 0 auto;">
				<i class="fas fa-upload"></i> å‰å¾€GitHubä¸Šä¼ æ–‡ä»¶
			</a>
		</div>
		
		<!-- å›¾ç‰‡æµè§ˆå™¨æ¨¡æ€æ¡† -->
		<div id="image-browser-modal" class="image-browser-modal">
			<div class="modal-header">
				<div class="modal-title">
					<i class="fas fa-images"></i>
					<span id="modal-title-text">å›¾ç‰‡æµè§ˆå™¨</span>
				</div>
				<button class="close-modal" id="close-browser-modal">&times;</button>
			</div>
			
			<div class="modal-body">
				<!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
				<div class="loader" id="image-loader"></div>
				
				<!-- å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸ -->
				<div class="image-container">
					<img id="browser-image" class="browser-image" src="" alt="">
				</div>
				
				<!-- å¯¼èˆªæŒ‰é’® -->
				<button class="nav-btn prev-btn" id="prev-image-btn">
					<i class="fas fa-chevron-left"></i>
				</button>
				
				<button class="nav-btn next-btn" id="next-image-btn">
					<i class="fas fa-chevron-right"></i>
				</button>
				
				<!-- è§¦æ‘¸æç¤º -->
				<div class="touch-hint" id="touch-hint">å·¦å³æ»‘åŠ¨åˆ‡æ¢å›¾ç‰‡</div>
			</div>
			
			<div class="modal-footer">
				<div class="image-counter">
					<span id="current-image-index">1</span> / <span id="total-images-count">1</span>
				</div>
				
				<div class="image-info" id="image-info-text">
					å›¾ç‰‡ä¿¡æ¯
				</div>
				
				<div class="image-actions">
					<button class="action-btn" id="download-image-btn">
						<i class="fas fa-download"></i> ä¸‹è½½
					</button>
				</div>
			</div>
		</div>
		
		<!-- é¡µè„š -->
		<footer>
			<p>Â© 2024 å®æœæ° | æœ¬é¡µé¢è‡ªåŠ¨æ£€æµ‹ <a href="https://github.com/ningchaojie/ningchaojie.github.io" target="_blank">GitHubä»“åº“</a> ä¸­çš„æ–‡ä»¶</p>
			<p style="margin-top: 10px; font-size: 0.85rem;">
				æ–‡ä»¶å‘½åè§„åˆ™: åç§°_ç±»å‹_åºå·.æ‰©å±•å | æ”¯æŒç±»å‹: æè¿°, ç•Œé¢, å¼•è¨€, ç›®å½•
			</p>
			<p style="margin-top: 5px; font-size: 0.85rem;">
				é¡µé¢ç‰ˆæœ¬: 3.0 | ä¸“ä¸šå›¾ç‰‡æµè§ˆå™¨ | æœ€åæ›´æ–°: 2024-12-25
			</p>
		</footer>
	</div>

	<script>
		// å…¨å±€å˜é‡
		let allFilesData = [];
		let filteredFilesData = [];
		let currentFilter = 'all';
		let downloadStats = {};
		
		// å›¾ç‰‡æµè§ˆå™¨çŠ¶æ€ç®¡ç†
		const imageBrowser = {
			isOpen: false,
			scrollPosition: 0,
			currentGroupIndex: -1,
			currentImageType: '',
			currentImageIndex: 0,
			images: [],
			touchStartX: 0,
			touchStartY: 0
		};
		
		// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
		document.addEventListener('DOMContentLoaded', function() {
			// è®¾ç½®å½“å‰æ—¶é—´
			document.getElementById('current-time').textContent = new Date().toLocaleString('zh-CN');
			
			// åŠ è½½ä¸‹è½½ç»Ÿè®¡
			loadDownloadStats();
			
			// ä»GitHubåŠ è½½æ–‡ä»¶
			loadFilesFromGitHub();
			
			// ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
			bindEventListeners();
			
			// æ¯30åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡
			setInterval(loadFilesFromGitHub, 30 * 60 * 1000);
		});
		
		// ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
		function bindEventListeners() {
			// æœç´¢æ¡†è¾“å…¥äº‹ä»¶
			document.getElementById('search-input').addEventListener('input', searchFiles);
			
			// ç­›é€‰æŒ‰é’®ç‚¹å‡»äº‹ä»¶
			document.querySelectorAll('.filter-btn').forEach(btn => {
				btn.addEventListener('click', function() {
					// ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeç±»
					document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
					// ç»™å½“å‰æŒ‰é’®æ·»åŠ activeç±»
					this.classList.add('active');
					// æ›´æ–°å½“å‰ç­›é€‰å™¨
					currentFilter = this.getAttribute('data-filter');
					// åº”ç”¨ç­›é€‰
					applyFilter();
				});
			});
			
			// å›¾ç‰‡æµè§ˆå™¨æŒ‰é’®äº‹ä»¶
			document.getElementById('close-browser-modal').addEventListener('click', closeImageBrowser);
			document.getElementById('prev-image-btn').addEventListener('click', showPrevImage);
			document.getElementById('next-image-btn').addEventListener('click', showNextImage);
			document.getElementById('download-image-btn').addEventListener('click', downloadCurrentImage);
			
			// å›¾ç‰‡æµè§ˆå™¨è§¦æ‘¸äº‹ä»¶
			const modalBody = document.querySelector('.modal-body');
			modalBody.addEventListener('touchstart', handleTouchStart);
			modalBody.addEventListener('touchmove', handleTouchMove);
			modalBody.addEventListener('touchend', handleTouchEnd);
			
			// é”®ç›˜äº‹ä»¶
			document.addEventListener('keydown', handleKeyDown);
			
			// ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
			document.getElementById('image-browser-modal').addEventListener('click', function(e) {
				if (e.target === this) {
					closeImageBrowser();
				}
			});
			
			// é˜²æ­¢å³é”®èœå•å’Œå¼€å‘è€…å·¥å…·ï¼ˆåŸºæœ¬ä¿æŠ¤ï¼‰
			document.addEventListener('contextmenu', function(e) {
				if (e.target.tagName === 'IMG') {
					e.preventDefault();
				}
			});
			
			document.addEventListener('keydown', function(e) {
				// ç¦ç”¨F12ã€Ctrl+Shift+Iã€Ctrl+U
				if (e.key === 'F12' || 
					(e.ctrlKey && e.shiftKey && e.key === 'I') ||
					(e.ctrlKey && e.key === 'u')) {
					e.preventDefault();
				}
			});
		}
		
		// ä»GitHubä»“åº“åŠ è½½æ–‡ä»¶
		async function loadFilesFromGitHub() {
			try {
				// æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
				document.getElementById('loading').style.display = 'block';
				document.getElementById('files-container').style.display = 'none';
				document.getElementById('empty-state').style.display = 'none';
				document.getElementById('error-container').style.display = 'none';
				
				// GitHub API URL
				const username = 'ningchaojie';
				const repo = 'ningchaojie.github.io';
				const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/`;
				
				console.log('æ­£åœ¨è¯·æ±‚GitHub API:', apiUrl);
				
				// è·å–ä»“åº“æ–‡ä»¶åˆ—è¡¨
				const response = await fetch(apiUrl);
				
				if (!response.ok) {
					throw new Error(`GitHub APIé”™è¯¯: ${response.status} ${response.statusText}`);
				}
				
				const files = await response.json();
				
				if (!Array.isArray(files)) {
					throw new Error('GitHub APIè¿”å›çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®');
				}
				
				console.log(`æˆåŠŸè·å–åˆ°${files.length}ä¸ªæ–‡ä»¶`);
				
				// å¤„ç†æ–‡ä»¶æ•°æ®
				processFiles(files);
				
				// æ›´æ–°çŠ¶æ€
				document.getElementById('github-status').textContent = 'GitHub APIæ­£å¸¸';
				document.getElementById('github-status').style.color = '';
				
			} catch (error) {
				console.error('ä»GitHubåŠ è½½æ–‡ä»¶æ—¶å‡ºé”™:', error);
				showError(`æ— æ³•åŠ è½½æ–‡ä»¶åˆ—è¡¨: ${error.message}`);
				document.getElementById('github-status').textContent = 'GitHub APIé”™è¯¯';
				document.getElementById('github-status').style.color = '#c62828';
			}
		}
		
		// å¤„ç†æ–‡ä»¶æ•°æ®
		function processFiles(files) {
			// æ¸…ç©ºæ•°æ®
			allFilesData = [];
			
			// æŒ‰æ–‡ä»¶ååˆ†ç»„
			const fileGroups = {};
			
			// é¦–å…ˆæŒ‰åŸºç¡€åç§°åˆ†ç»„
			files.forEach(file => {
				if (file.type !== 'file') return;
				
				const parsed = parseFileName(file.name);
				const baseName = parsed.baseName;
				
				if (!fileGroups[baseName]) {
					fileGroups[baseName] = {
						mainFile: null,
						images: {
							'æè¿°': [],
							'ç•Œé¢': [],
							'å¼•è¨€': [],
							'ç›®å½•': []
						},
						parsedName: parsed
					};
				}
				
				if (parsed.type === 'main') {
					fileGroups[baseName].mainFile = file;
				} else if (['æè¿°', 'ç•Œé¢', 'å¼•è¨€', 'ç›®å½•'].includes(parsed.type)) {
					// æ·»åŠ åˆ°å¯¹åº”ç±»å‹çš„æ•°ç»„ä¸­ï¼Œå¹¶è®°å½•åºå·
					fileGroups[baseName].images[parsed.type].push({
						...file,
						index: parsed.index,
						type: parsed.type
					});
				}
			});
			
			// å¯¹æ¯ç§ç±»å‹çš„å›¾ç‰‡æŒ‰åºå·æ’åºï¼ˆå…è®¸è·³åºï¼‰
			Object.values(fileGroups).forEach(group => {
				Object.keys(group.images).forEach(type => {
					group.images[type].sort((a, b) => a.index - b.index);
				});
			});
			
			// è½¬æ¢ä¸ºæ•°ç»„å¹¶è¿‡æ»¤æ‰æ²¡æœ‰ä¸»æ–‡ä»¶çš„ç»„
			allFilesData = Object.values(fileGroups).filter(group => group.mainFile);
			
			// å¦‚æœæ²¡æœ‰æ–‡ä»¶ï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€
			if (allFilesData.length === 0) {
				document.getElementById('loading').style.display = 'none';
				document.getElementById('empty-state').style.display = 'block';
				updateStats();
				return;
			}
			
			// åº”ç”¨å½“å‰ç­›é€‰
			applyFilter();
			
			// éšè—åŠ è½½åŠ¨ç”»
			document.getElementById('loading').style.display = 'none';
		}
		
		// è§£ææ–‡ä»¶å
		function parseFileName(filename) {
			const parts = filename.split('.');
			const ext = parts.pop().toLowerCase();
			const nameWithoutExt = parts.join('.');
			
			// åŒ¹é…ï¼šåç§°_ç±»å‹_åºå·
			const pattern = /^(.+?)_(.+?)_(\d+)$/;
			const match = nameWithoutExt.match(pattern);
			
			if (match) {
				return {
					baseName: match[1],
					type: match[2],
					index: parseInt(match[3]),
					ext: ext,
					isImage: ['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)
				};
			}
			
			// ä¸æ˜¯å›¾ç‰‡ï¼Œæ˜¯ä¸»æ–‡ä»¶
			return {
				baseName: nameWithoutExt,
				type: 'main',
				index: null,
				ext: ext,
				isImage: false
			};
		}
		
		// è·å–æ–‡ä»¶ç±»å‹
		function getFileType(file) {
			const ext = file.name.split('.').pop().toLowerCase();
			
			if (ext === 'apk') return 'apk';
			if (['pdf', 'doc', 'docx', 'ppt', 'pptx', 'txt', 'xls', 'xlsx'].includes(ext)) return 'document';
			if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) return 'image';
			return 'other';
		}
		
		// åº”ç”¨ç­›é€‰
		function applyFilter() {
			const searchTerm = document.getElementById('search-input').value.toLowerCase();
			
			// å…ˆæ ¹æ®ç±»å‹ç­›é€‰
			if (currentFilter === 'all') {
				filteredFilesData = [...allFilesData];
			} else {
				filteredFilesData = allFilesData.filter(group => {
					const fileType = getFileType(group.mainFile);
					return fileType === currentFilter;
				});
			}
			
			// å†æ ¹æ®æœç´¢è¯ç­›é€‰
			if (searchTerm) {
				filteredFilesData = filteredFilesData.filter(group => {
					const fileName = group.mainFile.name.toLowerCase();
					const baseName = group.parsedName.baseName.toLowerCase();
					return fileName.includes(searchTerm) || baseName.includes(searchTerm);
				});
			}
			
			// æ˜¾ç¤ºæ–‡ä»¶
			displayFiles();
		}
		
		// æœç´¢æ–‡ä»¶
		function searchFiles() {
			applyFilter();
		}
		
		// æ˜¾ç¤ºæ–‡ä»¶
		function displayFiles() {
			const container = document.getElementById('files-container');
			const emptyState = document.getElementById('empty-state');
			
			// å¦‚æœæ²¡æœ‰æ–‡ä»¶ï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€
			if (filteredFilesData.length === 0) {
				container.style.display = 'none';
				emptyState.style.display = 'block';
				updateStats();
				return;
			}
			
			// æ¸…ç©ºå®¹å™¨
			container.innerHTML = '';
			
			// ç”Ÿæˆæ–‡ä»¶å¡ç‰‡
			filteredFilesData.forEach((group, index) => {
				const fileType = getFileType(group.mainFile);
				const card = createFileCard(group, fileType, index);
				container.appendChild(card);
			});
			
			// æ˜¾ç¤ºå®¹å™¨
			container.style.display = 'grid';
			emptyState.style.display = 'none';
			
			// åˆå§‹åŒ–æ¨ªå‘æ»šåŠ¨
			initHorizontalScrolls();
			
			// åˆå§‹åŒ–å›¾ç‰‡æ‡’åŠ è½½
			initLazyLoading();
			
			// åˆå§‹åŒ–å›¾ç‰‡ç‚¹å‡»äº‹ä»¶
			initImageClickEvents();
			
			// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
			updateStats();
		}
		
		// åˆ›å»ºæ–‡ä»¶å¡ç‰‡
		function createFileCard(group, fileType, cardIndex) {
			const mainFile = group.mainFile;
			const baseName = group.parsedName.baseName;
			const fileExt = mainFile.name.split('.').pop().toUpperCase();
			
			// åˆ›å»ºå¡ç‰‡å…ƒç´ 
			const card = document.createElement('div');
			card.className = `file-card ${fileType === 'document' ? 'document-card' : ''}`;
			card.dataset.index = cardIndex;
			
			// æ–‡ä»¶ç±»å‹æ˜¾ç¤ºæ–‡æœ¬
			let typeText = '';
			let typeIcon = '';
			if (fileType === 'apk') {
				typeText = 'Androidåº”ç”¨';
				typeIcon = '<i class="fas fa-mobile-alt"></i>';
			} else if (fileType === 'document') {
				typeText = 'æ–‡æ¡£æ–‡ä»¶';
				typeIcon = '<i class="fas fa-file-alt"></i>';
			} else {
				typeText = 'å…¶ä»–æ–‡ä»¶';
				typeIcon = '<i class="fas fa-file"></i>';
			}
			
			// ä¸‹è½½æ¬¡æ•°
			const downloadCount = downloadStats[mainFile.name] || 0;
			
			// æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
			const fileSize = formatFileSize(mainFile.size);
			
			// æ›´æ–°æ—¶é—´æ ¼å¼åŒ–
			const updateTime = formatTime(mainFile.updated_at || mainFile.created_at);
			
			// æ„å»ºå›¾ç‰‡HTML
			let imagesHtml = '';
			const imageTypes = ['æè¿°', 'ç•Œé¢', 'å¼•è¨€', 'ç›®å½•'];
			
			imageTypes.forEach(type => {
				const images = group.images[type];
				if (images.length > 0) {
					imagesHtml += createImageScrollHtml(type, images, cardIndex, baseName);
				}
			});
			
			// æ„å»ºå¡ç‰‡HTML
			card.innerHTML = `
				<div class="card-header">
					<div class="file-type">${typeIcon} ${typeText}</div>
					<div class="file-name">${baseName}</div>
					<div class="file-filename">${mainFile.name}</div>
				</div>
				
				<div class="card-body">
					<div class="file-meta">
						<div class="meta-row">
							<span class="meta-label"><i class="fas fa-hdd file-icon"></i>æ–‡ä»¶å¤§å°:</span>
							<span class="meta-value">${fileSize}</span>
						</div>
						<div class="meta-row">
							<span class="meta-label"><i class="fas fa-calendar-alt file-icon"></i>æ›´æ–°æ—¶é—´:</span>
							<span class="meta-value">${updateTime}</span>
						</div>
						<div class="meta-row">
							<span class="meta-label"><i class="fas fa-download file-icon"></i>ä¸‹è½½æ¬¡æ•°:</span>
							<span class="meta-value">${downloadCount}</span>
						</div>
						<div class="meta-row">
							<span class="meta-label"><i class="fas fa-code file-icon"></i>æ–‡ä»¶æ ¼å¼:</span>
							<span class="meta-value">${fileExt}</span>
						</div>
					</div>
					
					${imagesHtml}
					
					<a href="${mainFile.download_url}" 
					   class="download-btn" 
					   onclick="trackDownload('${mainFile.name}')"
					   download="${mainFile.name}">
						<i class="fas fa-download"></i> ä¸‹è½½æ–‡ä»¶
						<span class="download-count">${downloadCount}æ¬¡</span>
					</a>
				</div>
			`;
			
			return card;
		}
		
		// åˆ›å»ºå›¾ç‰‡æ¨ªå‘æ»šåŠ¨HTML
		function createImageScrollHtml(type, images, cardIndex, baseName) {
			const typeIcons = {
				'æè¿°': '<i class="fas fa-info-circle"></i>',
				'ç•Œé¢': '<i class="fas fa-mobile-alt"></i>',
				'å¼•è¨€': '<i class="fas fa-book-open"></i>',
				'ç›®å½•': '<i class="fas fa-list-ul"></i>'
			};
			
			const typeNames = {
				'æè¿°': 'æè¿°å›¾ç‰‡',
				'ç•Œé¢': 'ç•Œé¢æˆªå›¾',
				'å¼•è¨€': 'å¼•è¨€å›¾ç‰‡',
				'ç›®å½•': 'ç›®å½•å›¾ç‰‡'
			};
			
			const icon = typeIcons[type] || '<i class="fas fa-image"></i>';
			const typeName = typeNames[type] || type;
			
			// æ„å»ºå›¾ç‰‡HTML
			let imagesHtml = '';
			images.forEach((img, imgIndex) => {
				imagesHtml += `
					<img src="" 
						 data-src="${img.download_url}"
						 data-group-index="${cardIndex}"
						 data-image-type="${img.type}"
						 data-image-index="${imgIndex}"
						 alt="${baseName} ${typeName} ${imgIndex + 1}"
						 class="scroll-image lazy-image"
						 loading="lazy">
				`;
			});
			
			return `
				<div class="images-section">
					<div class="section-title">
						${icon} ${typeName} (${images.length}å¼ )
					</div>
					<div class="scroll-container">
						<button class="scroll-btn scroll-left" 
								onclick="scrollImages('left', '${type}-${cardIndex}')">
							<i class="fas fa-chevron-left"></i>
						</button>
						
						<div class="scroll-wrapper" id="scroll-${type}-${cardIndex}">
							<div class="scroll-content">
								${imagesHtml}
							</div>
						</div>
						
						<button class="scroll-btn scroll-right"
								onclick="scrollImages('right', '${type}-${cardIndex}')">
							<i class="fas fa-chevron-right"></i>
						</button>
					</div>
				</div>
			`;
		}
		
		// åˆå§‹åŒ–æ¨ªå‘æ»šåŠ¨
		function initHorizontalScrolls() {
			// ä¸ºæ¯ä¸ªæ»šåŠ¨å®¹å™¨è®¾ç½®åˆå§‹çŠ¶æ€
			document.querySelectorAll('.scroll-container').forEach(container => {
				const wrapper = container.querySelector('.scroll-wrapper');
				const leftBtn = container.querySelector('.scroll-left');
				const rightBtn = container.querySelector('.scroll-right');
				
				// åˆå§‹æ£€æŸ¥æŒ‰é’®çŠ¶æ€
				updateScrollButtons(wrapper, leftBtn, rightBtn);
				
				// ç›‘å¬æ»šåŠ¨äº‹ä»¶
				wrapper.addEventListener('scroll', function() {
					updateScrollButtons(wrapper, leftBtn, rightBtn);
				});
			});
		}
		
		// æ›´æ–°æ»šåŠ¨æŒ‰é’®çŠ¶æ€
		function updateScrollButtons(wrapper, leftBtn, rightBtn) {
			const scrollLeft = wrapper.scrollLeft;
			const maxScrollLeft = wrapper.scrollWidth - wrapper.clientWidth;
			
			// å·¦æŒ‰é’®
			if (scrollLeft <= 10) {
				leftBtn.classList.add('hidden');
			} else {
				leftBtn.classList.remove('hidden');
			}
			
			// å³æŒ‰é’®
			if (scrollLeft >= maxScrollLeft - 10) {
				rightBtn.classList.add('hidden');
			} else {
				rightBtn.classList.remove('hidden');
			}
		}
		
		// æ»šåŠ¨å›¾ç‰‡
		function scrollImages(direction, scrollId) {
			const wrapper = document.getElementById(`scroll-${scrollId}`);
			if (!wrapper) return;
			
			const scrollAmount = 300; // æ¯æ¬¡æ»šåŠ¨300px
			
			if (direction === 'left') {
				wrapper.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
			} else {
				wrapper.scrollBy({ left: scrollAmount, behavior: 'smooth' });
			}
		}
		
		// åˆå§‹åŒ–å›¾ç‰‡æ‡’åŠ è½½
		function initLazyLoading() {
			// ä½¿ç”¨Intersection Observerå®ç°æ‡’åŠ è½½
			const lazyImages = document.querySelectorAll('.lazy-image');
			
			const imageObserver = new IntersectionObserver((entries, observer) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						const img = entry.target;
						img.src = img.dataset.src;
						img.classList.remove('lazy-image');
						
						// å›¾ç‰‡åŠ è½½å®Œæˆåç§»é™¤èƒŒæ™¯è‰²
						img.onload = function() {
							img.style.background = 'none';
						};
						
						// å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†
						img.onerror = function() {
							img.style.background = '#ffebee';
							img.style.display = 'flex';
							img.style.alignItems = 'center';
							img.style.justifyContent = 'center';
							img.innerHTML = '<div style="color: #c62828; font-size: 0.8rem;">å›¾ç‰‡åŠ è½½å¤±è´¥</div>';
						};
						
						observer.unobserve(img);
					}
				});
			});
			
			lazyImages.forEach(img => imageObserver.observe(img));
		}
		
		// åˆå§‹åŒ–å›¾ç‰‡ç‚¹å‡»äº‹ä»¶
		function initImageClickEvents() {
			document.querySelectorAll('.scroll-image').forEach(img => {
				img.addEventListener('click', function() {
					const groupIndex = parseInt(this.dataset.groupIndex);
					const imageType = this.dataset.imageType;
					const imageIndex = parseInt(this.dataset.imageIndex);
					
					// æ‰“å¼€å›¾ç‰‡æµè§ˆå™¨
					openImageBrowser(groupIndex, imageType, imageIndex);
				});
			});
		}
		
		// æ‰“å¼€å›¾ç‰‡æµè§ˆå™¨
		function openImageBrowser(groupIndex, imageType, imageIndex) {
			if (imageBrowser.isOpen) return;
			
			// ä¿å­˜å½“å‰æ»šåŠ¨ä½ç½®
			imageBrowser.scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
			
			// é”å®šèƒŒæ™¯æ»šåŠ¨
			document.body.style.overflow = 'hidden';
			document.body.style.position = 'fixed';
			document.body.style.width = '100%';
			document.body.style.top = `-${imageBrowser.scrollPosition}px`;
			
			// è®¾ç½®å›¾ç‰‡æµè§ˆå™¨æ•°æ®
			const group = filteredFilesData[groupIndex];
			imageBrowser.currentGroupIndex = groupIndex;
			imageBrowser.currentImageType = imageType;
			imageBrowser.currentImageIndex = imageIndex;
			imageBrowser.images = group.images[imageType];
			imageBrowser.isOpen = true;
			
			// æ›´æ–°æ¨¡æ€æ¡†æ ‡é¢˜
			const typeNames = {
				'æè¿°': 'æè¿°å›¾ç‰‡',
				'ç•Œé¢': 'ç•Œé¢æˆªå›¾',
				'å¼•è¨€': 'å¼•è¨€å›¾ç‰‡',
				'ç›®å½•': 'ç›®å½•å›¾ç‰‡'
			};
			
			document.getElementById('modal-title-text').textContent = 
				`${group.parsedName.baseName} - ${typeNames[imageType] || imageType}`;
			
			// æ˜¾ç¤ºæ¨¡æ€æ¡†
			document.getElementById('image-browser-modal').style.display = 'flex';
			
			// æ˜¾ç¤ºè§¦æ‘¸æç¤ºï¼ˆä»…ç§»åŠ¨ç«¯ï¼‰
			if (isMobileDevice()) {
				setTimeout(() => {
					const touchHint = document.getElementById('touch-hint');
					touchHint.classList.add('show');
					setTimeout(() => touchHint.classList.remove('show'), 3000);
				}, 500);
			}
			
			// åŠ è½½å½“å‰å›¾ç‰‡
			loadCurrentImage();
			
			// æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
			updateImageNavButtons();
		}
		
		// åŠ è½½å½“å‰å›¾ç‰‡
		function loadCurrentImage() {
			const currentImage = imageBrowser.images[imageBrowser.currentImageIndex];
			
			if (!currentImage) return;
			
			// æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
			document.getElementById('image-loader').style.display = 'block';
			
			// é‡ç½®å›¾ç‰‡çŠ¶æ€
			const browserImage = document.getElementById('browser-image');
			browserImage.classList.remove('loaded');
			browserImage.style.opacity = '0';
			
			// è®¾ç½®å›¾ç‰‡æº
			browserImage.src = currentImage.download_url;
			browserImage.alt = currentImage.name;
			
			// å›¾ç‰‡åŠ è½½å®Œæˆ
			browserImage.onload = function() {
				document.getElementById('image-loader').style.display = 'none';
				browserImage.classList.add('loaded');
				browserImage.style.opacity = '1';
				
				// æ›´æ–°å›¾ç‰‡ä¿¡æ¯
				document.getElementById('image-info-text').textContent = 
					`${currentImage.name} (${formatFileSize(currentImage.size)})`;
				
				// æ›´æ–°è®¡æ•°å™¨
				document.getElementById('current-image-index').textContent = imageBrowser.currentImageIndex + 1;
				document.getElementById('total-images-count').textContent = imageBrowser.images.length;
				
				// æ›´æ–°ä¸‹è½½æŒ‰é’®
				document.getElementById('download-image-btn').dataset.imageUrl = currentImage.download_url;
				document.getElementById('download-image-btn').dataset.imageName = currentImage.name;
			};
			
			// å›¾ç‰‡åŠ è½½å¤±è´¥
			browserImage.onerror = function() {
				document.getElementById('image-loader').style.display = 'none';
				browserImage.alt = 'å›¾ç‰‡åŠ è½½å¤±è´¥';
				document.getElementById('image-info-text').textContent = 'å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•';
			};
		}
		
		// æ˜¾ç¤ºä¸Šä¸€å¼ å›¾ç‰‡
		function showPrevImage() {
			if (imageBrowser.currentImageIndex > 0) {
				imageBrowser.currentImageIndex--;
				loadCurrentImage();
				updateImageNavButtons();
			}
		}
		
		// æ˜¾ç¤ºä¸‹ä¸€å¼ å›¾ç‰‡
		function showNextImage() {
			if (imageBrowser.currentImageIndex < imageBrowser.images.length - 1) {
				imageBrowser.currentImageIndex++;
				loadCurrentImage();
				updateImageNavButtons();
			}
		}
		
		// æ›´æ–°å›¾ç‰‡å¯¼èˆªæŒ‰é’®çŠ¶æ€
		function updateImageNavButtons() {
			const prevBtn = document.getElementById('prev-image-btn');
			const nextBtn = document.getElementById('next-image-btn');
			
			// ä¸Šä¸€å¼ æŒ‰é’®
			if (imageBrowser.currentImageIndex > 0) {
				prevBtn.classList.remove('hidden');
			} else {
				prevBtn.classList.add('hidden');
			}
			
			// ä¸‹ä¸€å¼ æŒ‰é’®
			if (imageBrowser.currentImageIndex < imageBrowser.images.length - 1) {
				nextBtn.classList.remove('hidden');
			} else {
				nextBtn.classList.add('hidden');
			}
		}
		
		// å…³é—­å›¾ç‰‡æµè§ˆå™¨
		function closeImageBrowser() {
			if (!imageBrowser.isOpen) return;
			
			// å…³é—­æ¨¡æ€æ¡†
			document.getElementById('image-browser-modal').style.display = 'none';
			
			// æ¢å¤èƒŒæ™¯æ»šåŠ¨
			document.body.style.overflow = '';
			document.body.style.position = '';
			document.body.style.width = '';
			document.body.style.top = '';
			
			// æ¢å¤æ»šåŠ¨ä½ç½®
			window.scrollTo(0, imageBrowser.scrollPosition);
			
			// é‡ç½®çŠ¶æ€
			imageBrowser.isOpen = false;
		}
		
		// ä¸‹è½½å½“å‰å›¾ç‰‡
		function downloadCurrentImage() {
			const btn = document.getElementById('download-image-btn');
			const imageUrl = btn.dataset.imageUrl;
			const imageName = btn.dataset.imageName;
			
			if (!imageUrl) return;
			
			const link = document.createElement('a');
			link.href = imageUrl;
			link.download = imageName;
			document.body.appendChild(link);
			link.click();
			document.body.removeChild(link);
			
			// è®°å½•ä¸‹è½½
			console.log(`å›¾ç‰‡ä¸‹è½½: ${imageName}`);
		}
		
		// è§¦æ‘¸äº‹ä»¶å¤„ç†
		function handleTouchStart(e) {
			if (!imageBrowser.isOpen) return;
			
			imageBrowser.touchStartX = e.touches[0].clientX;
			imageBrowser.touchStartY = e.touches[0].clientY;
		}
		
		function handleTouchMove(e) {
			if (!imageBrowser.isOpen) return;
			e.preventDefault(); // é˜²æ­¢é¡µé¢æ»šåŠ¨
		}
		
		function handleTouchEnd(e) {
			if (!imageBrowser.isOpen) return;
			
			const touchEndX = e.changedTouches[0].clientX;
			const touchEndY = e.changedTouches[0].clientY;
			
			const diffX = imageBrowser.touchStartX - touchEndX;
			const diffY = imageBrowser.touchStartY - touchEndY;
			
			// æ°´å¹³æ»‘åŠ¨è·ç¦»å¤§äºå‚ç›´æ»‘åŠ¨è·ç¦»ï¼Œä¸”å¤§äº50px
			if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
				if (diffX > 0) {
					showNextImage(); // å‘å·¦æ»‘åŠ¨ï¼Œä¸‹ä¸€å¼ 
				} else {
					showPrevImage(); // å‘å³æ»‘åŠ¨ï¼Œä¸Šä¸€å¼ 
				}
			}
		}
		
		// é”®ç›˜äº‹ä»¶å¤„ç†
		function handleKeyDown(e) {
			if (!imageBrowser.isOpen) return;
			
			switch(e.key) {
				case 'Escape':
					closeImageBrowser();
					break;
				case 'ArrowLeft':
					showPrevImage();
					break;
				case 'ArrowRight':
					showNextImage();
					break;
				case ' ':
				case 'Spacebar':
					e.preventDefault(); // é˜²æ­¢ç©ºæ ¼é”®æ»šåŠ¨é¡µé¢
					break;
			}
		}
		
		// æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
		function isMobileDevice() {
			return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
		}
		
		// åŠ è½½ä¸‹è½½ç»Ÿè®¡
		function loadDownloadStats() {
			try {
				const stats = localStorage.getItem('downloadStats');
				if (stats) {
					downloadStats = JSON.parse(stats);
				} else {
					downloadStats = {};
				}
			} catch (e) {
				console.error('åŠ è½½ä¸‹è½½ç»Ÿè®¡å¤±è´¥:', e);
				downloadStats = {};
			}
		}
		
		// ä¿å­˜ä¸‹è½½ç»Ÿè®¡
		function saveDownloadStats() {
			try {
				localStorage.setItem('downloadStats', JSON.stringify(downloadStats));
			} catch (e) {
				console.error('ä¿å­˜ä¸‹è½½ç»Ÿè®¡å¤±è´¥:', e);
			}
		}
		
		// è·Ÿè¸ªä¸‹è½½
		function trackDownload(filename) {
			// å¢åŠ ä¸‹è½½è®¡æ•°
			downloadStats[filename] = (downloadStats[filename] || 0) + 1;
			
			// ä¿å­˜åˆ°localStorage
			saveDownloadStats();
			
			// æ›´æ–°å½“å‰å¡ç‰‡çš„ä¸‹è½½æ¬¡æ•°æ˜¾ç¤º
			const downloadCountElement = document.querySelector(`.file-card[data-index] .download-count`);
			if (downloadCountElement) {
				downloadCountElement.textContent = `${downloadStats[filename]}æ¬¡`;
			}
			
			// æ›´æ–°æ€»ä¸‹è½½æ¬¡æ•°æ˜¾ç¤º
			updateStats();
			
			// è®°å½•ä¸‹è½½æ—¥å¿—
			console.log(`æ–‡ä»¶ä¸‹è½½: ${filename}, æ€»ä¸‹è½½æ¬¡æ•°: ${downloadStats[filename]}`);
		}
		
		// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
		function updateStats() {
			// æ–‡ä»¶æ•°é‡
			document.getElementById('total-files').textContent = `${filteredFilesData.length}ä¸ªæ–‡ä»¶`;
			
			// æ€»ä¸‹è½½æ¬¡æ•°
			const totalDownloads = Object.values(downloadStats).reduce((sum, count) => sum + count, 0);
			document.getElementById('total-downloads').textContent = `${totalDownloads}æ¬¡ä¸‹è½½`;
			
			// æœ€åæ›´æ–°æ—¶é—´
			if (filteredFilesData.length > 0) {
				// æ‰¾åˆ°æœ€æ–°çš„æ›´æ–°æ—¶é—´
				let latestTime = new Date(0);
				filteredFilesData.forEach(group => {
					const fileTime = new Date(group.mainFile.updated_at || group.mainFile.created_at);
					if (fileTime > latestTime) {
						latestTime = fileTime;
					}
				});
				
				document.getElementById('last-update').textContent = `æ›´æ–°äº: ${formatTime(latestTime.toISOString(), true)}`;
			} else {
				document.getElementById('last-update').textContent = `æš‚æ— æ–‡ä»¶`;
			}
		}
		
		// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
		function showError(message) {
			document.getElementById('error-text').textContent = message;
			document.getElementById('error-container').style.display = 'block';
			document.getElementById('loading').style.display = 'none';
			document.getElementById('files-container').style.display = 'none';
		}
		
		// æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
		function formatFileSize(bytes) {
			if (bytes === 0 || bytes === undefined) return 'æœªçŸ¥å¤§å°';
			
			const units = ['B', 'KB', 'MB', 'GB'];
			let size = bytes;
			let unitIndex = 0;
			
			while (size >= 1024 && unitIndex < units.length - 1) {
				size /= 1024;
				unitIndex++;
			}
			
			return size.toFixed(2) + ' ' + units[unitIndex];
		}
		
		// æ ¼å¼åŒ–æ—¶é—´
		function formatTime(dateString, short = false) {
			if (!dateString) return 'æœªçŸ¥æ—¶é—´';
			
			try {
				const date = new Date(dateString);
				if (isNaN(date.getTime())) {
					return 'æœªçŸ¥æ—¶é—´';
				}
				
				if (short) {
					// ç®€çŸ­æ ¼å¼ï¼šæœˆ-æ—¥ æ—¶:åˆ†
					return date.toLocaleDateString('zh-CN', { 
						month: '2-digit', 
						day: '2-digit' 
					}) + ' ' + date.toLocaleTimeString('zh-CN', { 
						hour: '2-digit', 
						minute: '2-digit' 
					});
				} else {
					// å®Œæ•´æ ¼å¼ï¼šå¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’
					return date.toLocaleDateString('zh-CN') + ' ' + date.toLocaleTimeString('zh-CN');
				}
			} catch (e) {
				return 'æœªçŸ¥æ—¶é—´';
			}
		}
	</script>
</body>
</html>